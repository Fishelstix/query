from flask import Flask, render_template, request, session, redirect, url_for
import google, bs4, urllib2, re

app = Flask(__name__)

@app.route("/")
@app.route("/home", methods = ["GET", "POST"])

#Basic home page that allows anyone to submit a question
def home():
    """
    if request.method== "GET":
	return render_template("home.html")
    else: 
        session["question"] = request.form['question']
        return redirect(url_for("results"))
    """
    q= "who played spiderman?"
    results = google.search(q,num=10,start=0,stop=10)
    rlist = []
    for r in results:
        rlist.append(r)
    print rlist[0]
    return render_template("home.html")
@app.route("/results")

#Shows the results from the search
def results():


    q= session["question"]
    results = google.search(q,num=10,start=0,stop=10)
    rlist = []
    for r in results:
        rlist.append(r)
    print rlist[0]
    return render_template("results.html", links = rlist)



if __name__ == "__main__":
    app.debug = True
    app.secret_key = "query"
    app.run(host='0.0.0.0', port=8000)
